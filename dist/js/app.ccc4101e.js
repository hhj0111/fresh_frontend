(function(t){function e(e){for(var a,i,c=e[0],o=e[1],u=e[2],l=0,p=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);d&&d(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,i=1;i<r.length;i++){var o=r[i];0!==n[o]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=r[0]))}return t}var a={},n={app:0},s=[];function i(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-12fd31b6":"ab464f9d","chunk-2d0d6d35":"5ffb483c","chunk-53c290c7":"6509125d"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(t){var e=[],r=n[t];if(0!==r)if(r)e.push(r[2]);else{var a=new Promise((function(e,a){r=n[t]=[e,a]}));e.push(r[2]=a);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,c.nc&&o.setAttribute("nonce",c.nc),o.src=i(t);var u=new Error;s=function(e){o.onerror=o.onload=null,clearTimeout(l);var r=n[t];if(0!==r){if(r){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",u.name="ChunkLoadError",u.type=a,u.request=s,r[1](u)}n[t]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(r,a,function(e){return t[e]}.bind(null,a));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=u;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"45d4":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("div",{staticClass:"goods_detail_con clearfix"},[r("div",{staticClass:"goods_detail_pic fl"},[r("img",{attrs:{src:"../images/goods/"+t.product.picture}})]),r("div",{staticClass:"goods_detail_list fr"},[r("h3",[t._v(t._s(t.product.productname))]),r("p",[t._v(" "+t._s(t.product.description)+" ")]),r("div",{staticClass:"prize_bar"},[r("span",{staticClass:"show_pirze"},[t._v("¥"),r("em",[t._v(t._s(t.product.unitprice))])]),r("span",{staticClass:"show_unit"},[t._v("单 位："+t._s(t.product.unit))]),r("span",{staticClass:"show_unit"},[t._v("库 存："+t._s(t.product.quantity))])]),t._m(1),t._m(2),t._m(3)])]),r("div",{staticClass:"main_wrap clearfix"},[r("div",{staticClass:"l_wrap fl clearfix"},[r("div",{staticClass:"new_goods"},[r("h3",[t._v("新品推荐")]),r("ul",t._l(t.newProduct,(function(e){return r("li",{key:e.id},[r("router-link",{attrs:{to:"/product/"+e.id}},[r("img",{attrs:{src:"../images/goods/"+e.picture}})]),r("h4",[r("a",{attrs:{href:"#"}},[t._v(t._s(e.productname))])]),r("div",{staticClass:"prize"},[t._v("￥"+t._s(e.unitprice))])],1)})),0)])]),r("div",{staticClass:"r_wrap fr clearfix"},[t._m(4),r("div",{staticClass:"tab_content"},[r("dl",[r("dt",[t._v("商品详情：")]),r("dd",[t._v(" "+t._s(t.product.detail)+" ")])])])])])])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"breadcrumb"},[r("a",{attrs:{href:"#"}},[t._v("全部分类")]),r("span",[t._v(">")]),r("a",{attrs:{href:"#"}},[t._v("新鲜水果")]),r("span",[t._v(">")]),r("a",{attrs:{href:"#"}},[t._v("商品详情")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"goods_num clearfix"},[r("div",{staticClass:"num_name fl"},[t._v("数 量：")]),r("div",{staticClass:"num_add fl"},[r("input",{staticClass:"num_show fl",attrs:{type:"text",value:"1"}}),r("a",{staticClass:"add fr",attrs:{href:"javascript:;"}},[t._v("+")]),r("a",{staticClass:"minus fr",attrs:{href:"javascript:;"}},[t._v("-")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"total"},[t._v("总价："),r("em",[t._v("16.80元")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"operate_btn"},[r("a",{staticClass:"buy_btn",attrs:{href:"javascript:;"}},[t._v("立即购买")]),r("a",{staticClass:"add_cart",attrs:{href:"javascript:;",id:"add_cart"}},[t._v("加入购物车")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"detail_tab clearfix"},[r("li",{staticClass:"active"},[t._v("商品介绍")]),r("li",[t._v("评论")])])}],s=(r("96cf"),r("1da1")),i={mounted:function(){this.getNewProdcut()},data:function(){return{product:{},newProduct:{}}},watch:{$route:"getProduct"},methods:{getProduct:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$route.params.id,e.next=3,axios.get("/api/product/detail/"+r);case 3:a=e.sent,n=a.data,1==n.status&&(t.product=n.result);case 6:case"end":return e.stop()}}),e)})))()},getNewProdcut:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getProduct();case 2:return e.next=4,axios.get("/api/product/getNewProductByCid?cid="+t.product.cid);case 4:r=e.sent,a=r.data,t.newProduct=a.result;case 7:case"end":return e.stop()}}),e)})))()}}},c=i,o=r("2877"),u=Object(o["a"])(c,a,n,!1,null,null,null);e["default"]=u.exports},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=(r("d3b7"),r("bc3a")),s=r.n(n),i={},c=s.a.create(i);c.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),c.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){t.axios=c,window.axios=c,Object.defineProperties(t.prototype,{axios:{get:function(){return c}},$axios:{get:function(){return c}}})},a["a"].use(Plugin);Plugin;var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},u=[],l={name:"App"},d=l,p=r("2877"),f=Object(p["a"])(d,o,u,!1,null,null,null),v=f.exports,h=r("8c4f"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("div",{staticClass:"login_form_bg"},[r("div",{staticClass:"login_form_wrap clearfix"},[r("div",{staticClass:"login_banner fl"}),r("div",{staticClass:"slogan fl"},[t._v("日夜兼程 · 急速送达")]),r("div",{staticClass:"login_form fr"},[r("div",{staticClass:"login_title clearfix"},[r("h1",[t._v("用户登录")]),r("router-link",{attrs:{to:"/register"}},[t._v("立即注册")])],1),t._m(1)])])]),t._m(2)])},_=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login_top clearfix"},[r("a",{staticClass:"login_logo",attrs:{href:"index.html"}},[r("img",{attrs:{src:"images/logo02.png"}})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form_input"},[r("form",[r("input",{staticClass:"name_input",attrs:{type:"text",name:"username",placeholder:"请输入用户名"}}),r("div",{staticClass:"user_error"},[t._v("输入错误")]),r("input",{staticClass:"pass_input",attrs:{type:"password",name:"pwd",placeholder:"请输入密码"}}),r("div",{staticClass:"pwd_error"},[t._v("输入错误")]),r("div",{staticClass:"more_input clearfix"},[r("input",{attrs:{type:"checkbox",name:""}}),r("label",[t._v("记住用户名")]),r("a",{attrs:{href:"#"}},[t._v("忘记密码")])]),r("input",{staticClass:"input_submit",attrs:{type:"submit",name:"",value:"登录"}})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"footer no-mp"},[r("div",{staticClass:"foot_link"},[r("a",{attrs:{href:"#"}},[t._v("关于我们")]),r("span",[t._v("|")]),r("a",{attrs:{href:"#"}},[t._v("联系我们")]),r("span",[t._v("|")]),r("a",{attrs:{href:"#"}},[t._v("招聘人才")]),r("span",[t._v("|")]),r("a",{attrs:{href:"#"}},[t._v("友情链接")])]),r("p",[t._v("CopyRight © 2016 北京天天生鲜信息技术有限公司 All Rights Reserved")]),r("p",[t._v("电话：010-****888 京ICP备*******8号")])])}],g=(r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1")),C=r("d4ec"),y=r("bee2"),b=function(){function t(){Object(C["a"])(this,t)}return Object(y["a"])(t,[{key:"saveUser",value:function(t){sessionStorage.setItem("user",JSON.stringify(t))}},{key:"loadUser",value:function(){var t=sessionStorage.getItem("user");return t?JSON.parse(t):null}}]),t}(),w={name:"Login",data:function(){return{username:"",password:"",message:""}},methods:{resetForm:function(){this.username="",this.password=""},login:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=new b,""!=t.username&&""!=t.password){e.next=3;break}return e.abrupt("return",t.message="请输入用户名或密码");case 3:return a=new URLSearchParams,a.append("username",t.username),a.append("password",t.password),e.next=8,axios.post("/api/user/login",a);case 8:if(n=e.sent,s=n.data,"2000"==s.code){e.next=12;break}return e.abrupt("return",t.message=s.message);case 12:r.saveUser(s.data),t.$router.push("/"),console.log(s);case 15:case"end":return e.stop()}}),e)})))()}}},k=w,P=Object(p["a"])(k,m,_,!1,null,null,null),x=P.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contentWrapper"},[r("h4",{staticClass:"contentTitle"},[t._v("我的购物车：")]),r("fieldset",[t._l(t.cart.items,(function(e,a){return r("div",{key:a,staticClass:"checkoutProductWrapper"},[r("a",{staticClass:"checkoutProductImageWrapper",attrs:{href:"#"}},[r("img",{staticClass:"checkoutProductImage",attrs:{src:"images/content/"+e.id+"-2.jpg",alt:""}})]),r("div",{staticClass:"checkoutProductInfoWrapper"},[r("a",{staticClass:"checkoutProductTitle",attrs:{href:"#"}},[t._v(t._s(e.name))]),r("div",{staticClass:"checkoutProductButtonsWrapper"},[r("input",{staticClass:"checkoutProductNumber checkoutProductNumber-1",attrs:{type:"text",name:"product-1"},domProps:{value:e.quantity},on:{keyup:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.update(e.id,r)},blur:function(r){return t.update(e.id,r)}}}),r("span",{staticClass:"checkoutProductPrice"},[t._v("￥ "+t._s(e.unitPrice))]),r("a",{staticClass:"checkoutRemoveProductButton",attrs:{href:"#"},on:{click:function(r){return t.del(e.id)}}})])])])})),r("div",{staticClass:"checkoutInfoWrapper"},[r("span",{staticClass:"checkoutProductsNumber"},[t._v("商品数量:"+t._s(t.allQuantity))]),r("span",{staticClass:"checkoutProductsTotal"},[t._v("总价格: $"+t._s(t.allPrice))]),r("router-link",{attrs:{to:"/orders"}},[t._v("dingdan")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],staticClass:"checkoutButtonsWrapper"},[r("input",{staticClass:"checkoutCheckoutButton",attrs:{type:"submit",value:"确认购买",id:"checkoutCheckoutButton"},on:{click:t.addOrder}})])],2)])},j=[],E=(r("4160"),r("159b"),r("7db0"),r("c740"),r("a434"),function(){function t(){Object(C["a"])(this,t),this.items=[]}return Object(y["a"])(t,[{key:"findById",value:function(t){return this.items.find((function(e){return e.id==t}))}},{key:"addToCart",value:function(t,e,r){var a=this.findById(t);a?(console.log(a),a.quantity++):(a={id:t,name:e,unitPrice:r,quantity:1},this.items.push(a))}},{key:"updateQuantity",value:function(t,e){var r=this.findById(t);r&&(r.quantity=e)}},{key:"removeCart",value:function(t){var e=this.items.findIndex((function(e){return e.id=t}));this.items.splice(e,1)}},{key:"saveCart",value:function(){localStorage.setItem("cart",JSON.stringify(this.items))}},{key:"loadCart",value:function(){var t=localStorage.getItem("cart");t&&(this.items=JSON.parse(t))}},{key:"totalQuantity",value:function(){var t=0;return this.items.forEach((function(e){return t+=parseInt(e.quantity)})),t}},{key:"totalPrice",value:function(){var t=0;return this.items.forEach((function(e){return t+=parseInt(e.quantity*e.unitPrice)})),t}},{key:"clearCart",value:function(){localStorage.removeItem("cart")}}]),t}()),$={name:"Cart",data:function(){return{cart:{},isLogin:!1}},computed:{allQuantity:function(){return this.cart.totalQuantity()},allPrice:function(){return this.cart.totalPrice()}},created:function(){this.cart=new E,this.cart.loadCart();var t=new b;t.loadUser()&&(this.isLogin=!0)},methods:{del:function(t){this.cart.removeCart(t),this.cart.saveCart()},update:function(t,e){var r=e.target.value;this.cart.updateQuantity(t,r),this.cart.saveCart()},addOrder:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.cart.items.length<1)){e.next=2;break}return e.abrupt("return");case 2:return r=[],t.cart.items.forEach((function(t){var e={product:{id:t.id,unitPrice:t.unitPrice},quantity:t.quantity};r.push(e)})),a=new b,n=a.loadUser().token,e.next=8,axios.post("/api/order/add",{details:r},{headers:{Authorization:"auth_"+n}});case 8:s=e.sent,i=s.data,console.log(i),t.cart.clearCart(),t.$router.push("/");case 13:case"end":return e.stop()}}),e)})))()}}},I=$,S=Object(p["a"])(I,O,j,!1,null,null,null),R=S.exports,q=r("45d4"),N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.orders,(function(e){return r("div",{key:e.id},[r("h5",{on:{click:function(r){return t.showDetail(e.id)}}},[t._v(t._s(e.consignee))]),r("h5",[t._v("总金额："+t._s(e.totalPrice))]),r("h5",[t._v("时间："+t._s(e.orderTime))]),r("h5",[t._v("phone："+t._s(e.phone))]),r("h5",[t._v("时间："+t._s(e.orderTime))]),r("br"),t._l(t.products,(function(e){return r("div",{key:e.name,staticClass:"detail"},[r("span",[t._v("名称:"+t._s(e.product.name))]),t._v(" "),r("span",[t._v("单价:"+t._s(e.product.unitPrice))]),t._v(" "),r("span",[t._v("数量:"+t._s(e.quantity))])])})),r("hr")],2)})),0)},T=[],B={data:function(){return{orders:{},products:{}}},computed:{myDate:function(){var t=new Date(times),e=t.getFullYear+"-"+(t.getMonth+1)+"-"+t.getDate;return e}},created:function(){var t=this,e=new b,r=e.loadUser().username;console.log(r),axios.get("/api/order/find?username="+r).then((function(e){t.orders=e.data.data}))},methods:{showDetail:function(t){var e=this;axios.get("/api/order/details/"+t).then((function(t){console.log(t.data.data),e.products=t.data.data}))}}},L=B,U=Object(p["a"])(L,N,T,!1,null,null,null),W=U.exports;a["a"].use(h["a"]);var J=[{path:"/login",name:"Login",component:x},{path:"/register",name:"Register",component:function(){return r.e("chunk-2d0d6d35").then(r.bind(null,"73cf"))}},{path:"/",component:function(){return r.e("chunk-53c290c7").then(r.bind(null,"d504"))},children:[{path:"",name:"admin",component:function(){return r.e("chunk-12fd31b6").then(r.bind(null,"57da"))}},{path:"/product/:id",name:"product",component:function(){return Promise.resolve().then(r.bind(null,"45d4"))}}]},{path:"/product/:id",name:"Product",component:q["default"]},{path:"/cart",name:"Cart",component:R},{path:"/orders",name:"Orders",component:W}],Q=new h["a"]({mode:"history",base:"/",routes:J}),D=Q,M=h["a"].prototype.push;h["a"].prototype.push=function(t){return M.call(this,t).catch((function(t){return t}))},a["a"].config.productionTip=!1,new a["a"]({router:D,render:function(t){return t(v)}}).$mount("#app")}});
//# sourceMappingURL=app.ccc4101e.js.map